<html>
<head>
	<LINK REL=StyleSheet HREF="/static/style/main-style.css" TYPE="text/css" MEDIA=screen>
	
    <script src="/static/js/jquery-3.6.0.min.js"></script>
	<script src="/static/js/moment.min.js"></script>
<style>
body
{
	margin: 20px 20px;
}

.title
{
	font-family: Helvetica;
	color:silver;
	font-size: 40px;
	
}

h2
{
	margin-bottom:0;
}

.newpage 
{
	color: #222222;
	font-size: 25px;
}

.newpagebox
{
	border-radius: 0px;
	border-top: none;
	border-left: none;
	border-right: none;
	border-bottom: solid #444 .5px;
	font-size: 25px;
	width: 40%;


}
.goButton
{
	font-size:25;
	width: 45px;
	height: 35px;
}

.colheader
{
	color: #777;
	font-size: 20px;
	padding-bottom:5px;
}


.buffer {height:30px; }

div#left {
    float: left;
    width: 33%;
	height: 70%;
	
	
}
div#right {
    float: right;
    width: 33%;
	height: 70%;
	
}
div#middle {
    padding: 0px 160px 5px 160px;
    margin: 0px;
	height: 70%;
	
	
	
}

.simplist {
	list-style: none;
	margin: 0 0 0 0;
	padding: 0 0 0 0;
}

.simplist td { padding: 0 20 0 0; }


</style>

</head>
<body>
	<div class="title" id="headface"></div>
	<div id="news" class="newpage">  <span id="whoops"></span></div>
	<div class="buffer"></div>
	<div id="left">
	<div id="recent"></div>
	</div>	
</body>


<script>
var pathname = window.location.origin;
var page = pathname.split("//")[1].split(".")[0] //get subdomain

$("#headface").html("pithy")
$("#news").prepend("new page -> "+pathname+"/<input class='newpagebox' id='newpage'> </input><button class='goButton' onclick='goThere()'>go</button>")

$.post("/code_list/",{'count':20},function(data)
{
	out = "<h2>Recent</h2>\n<table class='simplist'>\n"
	for (i in data['files'])
	{
		core = data['files'][i][0].split("/")[1].replace(".py","")
		//ts  = new Date(data['files'][i][1]).toLocaleString('en-US', { timeZone: "MST" });
		ts = moment(data['files'][i][1]).format("YYYY-MM-DD HH:mm:ss")
		link = `<a href="${core}">${core}</a>`

		out += `<tr><td>${link}</td><td>${ts}</tr></td>\n`

	}
	out+='</table>'
	$("#recent").html(out)
})


function goThere()
{
	foo = $("#newpage").val()
	if (foo.length > 0 && foo != "files"  && foo != "files/")
	{ 
		destination = pathname+"/"+foo
		window.location = destination
	}
	else
	{
		$("#whoops").hide()
		$("#whoops").html("try again")
		$("#whoops").fadeIn("slow")
		$("#whoops").fadeOut("slow")
		
		
	}
	
}

</script>

</html>
