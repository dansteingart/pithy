"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function write(){return _fsPromise2["default"].WriteStream(_path2["default"].join(_config2["default"].cacheDir,".tmp",(0,_nodeUuid2["default"])()))}function read(e){return _fsPromise2["default"].ReadStream(_path2["default"].join(_config2["default"].cacheDir,e))}function init(){return(0,_mkdirpThen2["default"])(_path2["default"].join(_config2["default"].cacheDir,".tmp"))}function fetch(e,r){return new _promise2["default"](function(i,t){var u=_tar2["default"].Extract({path:e,strip:1});read(r).on("error",t).pipe((0,_gunzipMaybe2["default"])()).on("error",t).pipe(u).on("error",t).on("finish",i)})}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise);exports.write=write,exports.read=read,exports.init=init,exports.fetch=fetch;var _gunzipMaybe=require("gunzip-maybe"),_gunzipMaybe2=_interopRequireDefault(_gunzipMaybe),_tar=require("tar"),_tar2=_interopRequireDefault(_tar),_fsPromise=require("fs-promise"),_fsPromise2=_interopRequireDefault(_fsPromise),_path=require("path"),_path2=_interopRequireDefault(_path),_nodeUuid=require("node-uuid"),_nodeUuid2=_interopRequireDefault(_nodeUuid),_mkdirpThen=require("mkdirp-then"),_mkdirpThen2=_interopRequireDefault(_mkdirpThen),_config=require("./config"),_config2=_interopRequireDefault(_config);