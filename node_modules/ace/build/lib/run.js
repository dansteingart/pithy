"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function runCommand(e,r){var t=(0,_assign2["default"])({},process.env,{PATH:[_path2["default"].join(e,"node_modules",".bin"),process.env.PATH,_path2["default"].resolve(__dirname,"..","node_modules",".bin")].join(_path2["default"].delimiter)});return new _promise2["default"](function(n,a){var o=_child_process2["default"].spawn(_config2["default"].sh,[_config2["default"].shFlag,r],{cwd:e,env:t,stdio:"inherit"});o.on("close",function(e){return e?a(new Error("Command "+r+" ended with code "+e)):void n()}),o.on("error",a)})}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_getIterator2=require("babel-runtime/core-js/get-iterator"),_getIterator3=_interopRequireDefault(_getIterator2),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_assign=require("babel-runtime/core-js/object/assign"),_assign2=_interopRequireDefault(_assign),_path=require("path"),_path2=_interopRequireDefault(_path),_config=require("./config"),_config2=_interopRequireDefault(_config),_child_process=require("child_process"),_child_process2=_interopRequireDefault(_child_process);exports["default"]=function(){var e=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function r(e,t,n){var a,o,i,u,s,c,_;return _regenerator2["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=["pre"+n,n,"post"+n].map(function(e){return t.scripts&&t.scripts[e]}).filter(function(e){return e}),o=!0,i=!1,u=void 0,r.prev=4,s=(0,_getIterator3["default"])(a);case 6:if(o=(c=s.next()).done){r.next=13;break}return _=c.value,r.next=10,runCommand(e,_);case 10:o=!0,r.next=6;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](4),i=!0,u=r.t0;case 19:r.prev=19,r.prev=20,!o&&s["return"]&&s["return"]();case 22:if(r.prev=22,!i){r.next=25;break}throw u;case 25:return r.finish(22);case 26:return r.finish(19);case 27:return r.abrupt("return",0);case 28:case"end":return r.stop()}},r,this,[[4,15,19,27],[20,,22,26]])}));return function(r,t,n){return e.apply(this,arguments)}}();